/*! tumbleCube 10-02-2015 */
function resize(){var a=$(".face"),b={};[".one",".two",".three",".four",".five",".six"].forEach(function(c,d){b["$"+(d+1)]=a.filter(c)});var c=360,d=c/2,e=d/2,f=.5*($window.height()-c);$cube.css("margin-top",f+"px"),$cube.css("height",c+"px"),a.css("height",c+"px"),$cube.css("width",c+"px"),b.$1.css("-webkit-transform","rotateX("+e+"deg) translateZ("+d+"px)"),b.$1.css("transform","rotateX("+e+"deg) translateZ("+d+"px)"),b.$2.css("-webkit-transform","translateZ("+d+"px)"),b.$2.css("transform","translateZ("+d+"px)"),b.$3.css("-webkit-transform","rotateY("+e+"deg) translateZ("+d+"px)"),b.$3.css("transform","rotateY("+e+"deg) translateZ("+d+"px)"),b.$4.css("-webkit-transform","rotateY("+d+"deg) translateZ("+d+"px)"),b.$4.css("transform","rotateY("+d+"deg) translateZ("+d+"px)"),b.$5.css("-webkit-transform","rotateY(-"+e+"deg) translateZ("+d+"px)"),b.$5.css("transform","rotateY(-"+e+"deg) translateZ("+d+"px)"),b.$6.css("-webkit-transform","rotateX(-"+e+"deg) translateZ("+d+"px) rotate("+d+"deg)"),b.$6.css("transform","rotateX(-"+e+"deg) translateZ("+d+"px) rotate("+d+"deg)")}function tumbleCubeMobile(a){function b(){g-=f,h+=e,e*=.1,f*=.1,a[0].style.webkitTransform="rotateX("+g+"deg) rotateY("+h+"deg)",a[0].style.MozTransform="rotateX("+g+"deg) rotateY("+h+"deg)"}var c,d,e=0,f=0,g=0,h=0;document.addEventListener("touchstart",function(a){if("A"!=a.target.tagName){a.preventDefault();var b=a.touches?a.touches[0]:a.detail.touches[0];c=b.pageX,d=b.pageY}},!1),document.addEventListener("touchmove",function(a){a.preventDefault();var b=a.touches?a.touches[0]:a.detail.touches[0],g=b.pageX,h=b.pageY;c!==g&&(e=g-c),d!==h&&(f=h-d),c=g,d=h,isMoving=!0},!1),document.addEventListener("touchend",function(a){a.preventDefault(),isMoving=!1},!1),setInterval(b,50)}function isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function titlCubeMobile(){var a=[new CustomEvent("touchstart"),new CustomEvent("touchmove"),new CustomEvent("touchend")];a[0].initCustomEvent("touchstart",!0,!0,{touches:[{pageX:0,pageY:0}]}),a[1].initCustomEvent("touchmove",!0,!0,{touches:[{pageX:11,pageY:6}]});for(var b=0;b<a.length;b++)document.dispatchEvent(a[b])}function tumbleCubeDesktop(a,b){function c(){b.on("mousewheel",function(a){var b,c;k=!0,b=a.which,c=1===b,c&&a.preventDefault(),1===a.which&&(f=.2*a.deltaX,g=.2*a.deltaY),e()})}function d(){b.on("keydown",function(a){var b,c,d;switch(d=-1!==[37,38,39,40].indexOf(c),d&&a.preventDefault(),f=0,g=0,b=5,a.which){case 37:f+=b;break;case 38:g-=b;break;case 39:f-=b;break;case 40:g+=b;break;default:return}e()})}function e(){n?j-=f:l?j+=f:m?h+=f:n?j-=f:h-=f,i-=g,a[0].style.webkitTransform="rotateX("+i+"deg) rotateY("+h+"deg) rotateZ("+j+"deg)",a[0].style.MozTransform="rotateX("+i+"deg) rotateY("+h+"deg) rotateZ("+j+"deg)",setInterval(function(){var a=Math.abs(i%180/2),b=Math.abs(i%360/2),c=Math.abs((i-90)/180%2);k||(l=Math.abs(45-a)<10,m=Math.abs(90-b)<10,n=Math.abs(c-1)<.2)},10),setInterval(function(){k=!1},250)}var f=0,g=0,h=0,i=0,j=0,k=!1,l=!1,m=!1,n=!1;c(),d()}function titlCubeDesktop(){var a=$.Event("mousewheel",{deltaX:-90,deltaY:-10,which:1});$window.trigger(a)}function tumbleNav(){function a(){d.removeClass("window-edge").addClass("window-bottom"),$window.off("mousewheel touchmove",a),d.off("mouseenter",c)}function b(){d.removeClass("window-bottom").addClass("window-edge"),$window.on("mousewheel touchmove",a),$window.off("mouseenter",b)}function c(){d.off("mouseenter",c),e.fadeIn(400).delay(400).fadeOut(300)}var d=$(".nav-list"),e=$(".flash");$window.on("mouseenter",b),d.on("mouseenter",c)}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a){function b(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:(new Date).getTime(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=(new Date).getTime();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}}a.throttle=b}(jQuery);var $cube=$(".cube"),$window=$(window);resize(),$window.on("resize",resize),function(){isMobile()?(tumbleCubeMobile($cube),titlCubeMobile()):(tumbleCubeDesktop($cube,$window),titlCubeDesktop()),tumbleNav()}();